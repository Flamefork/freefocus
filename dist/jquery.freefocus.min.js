!function(){var a,b,c,d,e,f,g,h,i,j,k=[].slice;a=jQuery,a.freefocus=function(c,d){return"remove"===c?(i(),void 0):(c=a.extend({},a.freefocus.setupOptions,c),b("keydown",function(b){var e,f;return(e=h[b.which])?(f=a.extend({},a.freefocus.moveOptions,d,{move:e,targets:a(c.focusablesSelector)}),a(c.focusedSelector).freefocus(f)):void 0}),c.hoverFocus?b("mouseenter",c.focusablesSelector,function(){return a(this).trigger((null!=d?d.trigger:void 0)||a.freefocus.moveOptions.trigger)}):void 0)},a.fn.freefocus=function(b){var d;if(b=a.extend({},a.freefocus.moveOptions,b),null==c[b.move])throw new Error("Unknown move direction '"+b.move+"'");if(!(b.targets instanceof a))throw new Error("Argument targets should be a jQuery object");if(this.size()>1)throw new Error("Can't move from multiple elements");return this.size()&&(d=j(this.get(0),b))?a(d).trigger(b.trigger):void 0},a.freefocus.weightFn=function(a){var b,c;return c=a.distance,b=a.angle,b>89?!1:4*b+c},a.freefocus.moveOptions={trigger:"focus",weightFn:a.freefocus.weightFn,debug:!1},a.freefocus.setupOptions={focusablesSelector:"[tabindex]",focusedSelector:":focus",hoverFocus:!1},c={left:Math.atan2(0,-1),up:Math.atan2(-1,0),right:Math.atan2(0,1),down:Math.atan2(1,0)},h={37:"left",38:"up",39:"right",40:"down"},e=function(b){var c,d;return c=a(b),d=c.offset(),d.width=c.width(),d.height=c.height(),d.center={x:d.left+d.width/2,y:d.top+d.height/2},d},d=function(a,b,d){var e,f,g,h;return g=b.x-a.x,h=b.y-a.y,f=Math.sqrt(g*g+h*h),e=180*(Math.abs(c[d]-Math.atan2(h,g))/Math.PI),e>180&&(e=Math.abs(e-360)),[f,e]},j=function(a,b){var c,f,h,i,j,k,l;return j=b.targets,i=b.move,l=b.weightFn,c=b.debug,f=e(a),k=null,h=null,j.each(function(){var b,j,m,n,o;if(this!==a){if(m=e(this),o=d(f.center,m.center,i),j=o[0],b=o[1],n=l({from:[a,f],to:[this,m],move:i,distance:j,angle:b}),c&&g(this,j,b,n),n===!0)return k=this,!1;if(n===!1);else if(!h||h>n)return h=n,k=this}}),k},g=function(b,c,d,e){return a("span.weights",b).remove(),a(b).append('<span class="weights" style="position: absolute; left: 5px; top: 5px;\n                             font-size: 10px; font-family: monospace;\n                             color: #fff; text-shadow: 0 0 2px #000;">\n  d = '+Math.round(c)+"<br>\n  a = "+Math.round(d)+"<br>\n  w = "+(e?Math.round(e):void 0)+"\n</pre>")},f=[],b=function(){var b,c;return b=1<=arguments.length?k.call(arguments,0):[],(c=a(document)).on.apply(c,b),f.push(b)},i=function(){var b,c,d,e;for(c=0,d=f.length;d>c;c++)b=f[c],(e=a(document)).off.apply(e,b);return f=[]}}.call(this);