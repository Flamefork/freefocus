!function(a){"use strict";function b(b){var c=a(b),d=c.offset();return d.width=c.width(),d.height=c.height(),d.center={x:d.left+d.width/2,y:d.top+d.height/2},d}function c(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=Math.sqrt(d*d+e*e),g=180*(Math.abs(i[c]-Math.atan2(e,d))/Math.PI);return g>180&&(g=Math.abs(g-360)),{distance:f,angle:g}}function d(a,d){var e=b(a),g=null,h=null;return d.targets.each(function(){if(this!==a){var i=b(this),j=c(e.center,i.center,d.move),k=d.weightFn({from:[a,e],to:[this,i],move:d.move,distance:j.distance,angle:j.angle});return d.debug&&f(this,j.distance,j.angle,k),k===!0?(g=this,!1):(k===!1||(!h||h>k)&&(h=k,g=this),void 0)}}),g}function e(a){var b={};return a.split(";").forEach(function(a){var c=a.split(":");c[1]&&(b[c[0].trim()]=c[1].trim())}),b}function f(b,c,d,e){var f=["position: absolute","left: 5px","top: 5px","font-size: 10px","font-family: monospace","color: #fff","text-shadow: 0 0 2px #000"].join(";"),g=["d = "+Math.round(c),"a = "+Math.round(d),Math.round(e)].join("<br/>"),h='<span class="weights" style="'+f+'">'+g+"</span>";a("span.weights",b).remove(),a(b).append(h)}function g(){l.on.apply(l,arguments),k.push(arguments)}function h(){k.forEach(function(a){l.off.apply(l,a)}),k=[]}a.freefocus=function(b,c){return"remove"===b?(h(),void 0):(b=a.extend({},a.freefocus.setupOptions,b),g("keydown",function(d){var e=j[d.which];if(e){d.preventDefault();var f=a.extend({},a.freefocus.moveOptions,c,{move:e,targets:a(b.focusablesSelector)});a(b.focusedSelector).freefocus(f)}}),b.hoverFocus&&g("mouseenter",b.focusablesSelector,function(){var b=(c||{}).trigger||a.freefocus.moveOptions.trigger;return a(this).trigger(b)}),void 0)},a.fn.freefocus=function(b){if(b=a.extend({},a.freefocus.moveOptions,b),null===i[b.move])throw new Error("Unknown move direction '"+b.move+"'");if(!(b.targets instanceof a))throw new Error("Argument targets should be a jQuery object");if(this.size()>1)throw new Error("Can't move from multiple elements");if(!this.size())return this;var c=null;if(b.useNavProps){var f=this.get(0).style["nav"+b.move.charAt(0).toUpperCase()+b.move.slice(1)];f||(f=e(this.attr("style")||"")["nav-"+b.move]),f&&0===f.indexOf("#")&&(c=a(f).get(0))}return c||(c=d(this.get(0),b)),c?(a(c).trigger(b.trigger),this):this},a.freefocus.weightFn=function(a){return a.angle>89?!1:4*a.angle+a.distance},a.freefocus.moveOptions={trigger:"focus",weightFn:a.freefocus.weightFn,debug:!1,useNavProps:!0},a.freefocus.setupOptions={focusablesSelector:"[tabindex]",focusedSelector:":focus",hoverFocus:!1};var i={left:Math.atan2(0,-1),up:Math.atan2(-1,0),right:Math.atan2(0,1),down:Math.atan2(1,0)},j={37:"left",38:"up",39:"right",40:"down"},k=[],l=a(document)}(jQuery);