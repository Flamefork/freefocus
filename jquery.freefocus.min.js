!function(a){"use strict";function b(b,d){var e=b.get(0).style["nav"+d.move.charAt(0).toUpperCase()+d.move.slice(1)]||c(b.attr("style")||"")["nav-"+d.move];if(e){if(0!==e.indexOf("#"))throw new Error("Invalid nav-"+d.move+" selector '"+e+"': only #id allowed.");if(a(e).length)return a(e)}}function c(a){var b={};return a.split(";").forEach(function(a){var c=a.split(":");c[1]&&(b[c[0].trim()]=c[1].trim())}),b}function d(b,c,d){var e=j(b,d),f=a.freefocus.focusPoint;b.is(f.$el)||(f.$el=b,f.box={x:(e.x2-e.x1)/2,y:(e.y2-e.y1)/2}),f.updatedInDirection=l(n(f.box,e),c),f.updatedInDirection.fwd=k(e,c).fwd2}function e(b,c,d,e){var f=j(b,e),g=a.freefocus.focusPoint;g.$el=b;var h=k(f,c),i={fwd:h.fwd1,ort:p(g.updatedInDirection.ort,h.ort1,h.ort2)};g.box=o(m(i,c),f),d&&s(m(i,c),"#00f","entry focus point for "+b.html())}function f(b,c){var d=k(j(b,c.cache),c.move);c.debug&&s(m(a.freefocus.focusPoint.updatedInDirection,c.move),"#0f0","exit focus point for "+b.html());var e=1/0,f=null;return c.targets.each(function(){var h=a(this);if(!h.is(b)){var i=k(j(h,c.cache),c.move);if(!(i.fwd2<=d.fwd2)){var l=g(d,i);l<c.maxDistance&&e>l&&(f=h,e=l)}}}),c.debug&&f&&console.log("Distance from",b.get(0),"to",f.get(0),"is",e),f}function g(b,c){var d,e=a.freefocus.focusPoint.updatedInDirection,f={fwd:c.fwd1,ort:p(e.ort,c.ort1,c.ort2)},g=Math.abs(f.fwd-e.fwd),i=Math.abs(f.ort-e.ort);d=f.ort===e.ort?0:Math.sqrt(g*g+i*i);var j=h(b,c);return d+g+2*i-Math.sqrt(j)}function h(a,b){var c={ort1:a.ort1,ort2:a.ort2};b.ort1>c.ort1&&(c.ort1=b.ort1),b.ort2<c.ort2&&(c.ort2=b.ort2);var d=c.ort2-c.ort1;return 0>d&&(d=0),d}function i(a){var b=a.offset();return{x1:b.left,y1:b.top,x2:b.left+a.outerWidth(),y2:b.top+a.outerHeight()}}function j(a,b){if(!b)return i(a);var c=a.data("freefocus-dimensions");return c||(c=i(a),a.data("freefocus-dimensions",c)),c}function k(a,b){var c=l({x:a.x1,y:a.y1},b),d=l({x:a.x2,y:a.y2},b);return{fwd1:Math.min(c.fwd,d.fwd),ort1:Math.min(c.ort,d.ort),fwd2:Math.max(c.fwd,d.fwd),ort2:Math.max(c.ort,d.ort)}}function l(a,b){switch(b){case"left":return{fwd:-a.x,ort:-a.y};case"right":return{fwd:a.x,ort:a.y};case"down":return{fwd:a.y,ort:-a.x};case"up":return{fwd:-a.y,ort:a.x}}}function m(a,b){switch(b){case"left":return{x:-a.fwd,y:-a.ort};case"right":return{x:a.fwd,y:a.ort};case"down":return{x:-a.ort,y:a.fwd};case"up":return{x:a.ort,y:-a.fwd}}}function n(a,b){return{x:a.x+b.x1,y:a.y+b.y1}}function o(a,b){return{x:a.x-b.x1,y:a.y-b.y1}}function p(a,b,c){return Math.min(Math.max(a,b),c)}function q(){a(a.freefocus.installedFocusablesSelector).filter(":visible").each(function(){j(a(this),!0)})}function r(){a(".freefocus-debug").remove()}function s(b,c,d){a('<div class="freefocus-debug"></div>').appendTo(a("body")).css({position:"absolute",left:b.x-3,top:b.y-3,width:6,height:6,background:c,"border-radius":3}).attr("title",d)}function t(){w.on.apply(w,arguments),v.push(arguments)}function u(){v.forEach(function(a){w.off.apply(w,a)}),v=[]}a.freefocus=function(b,c){if("remove"===b)return u(),void 0;if("cache"===b)return q(c),void 0;b=a.extend({},a.freefocus.setupOptions,b),a.freefocus.installedFocusablesSelector=b.focusablesSelector;var d=function(d){var e=a.extend({},c,{move:d,targets:a(b.focusablesSelector).filter(":visible")});a(b.focusedSelector).freefocus(e)};b.throttle!==!1&&(d=_.throttle(d,b.throttle)),t("keydown",function(b){var c=a.freefocus.keys[b.which];c&&(b.preventDefault(),d(c))}),b.hoverFocus&&t("mouseenter",b.focusablesSelector,function(){var b=(c||{}).trigger||a.freefocus.moveOptions.trigger;return a(this).trigger(b)})},a.fn.freefocus=function(c){if("dimensions"===c){var g=j(this,!0);return{left:g.x1,top:g.y1,width:g.x2-g.x1,height:g.y2-g.y1}}if("moved"===c)return this.data("freefocus-dimensions",null),void 0;if(c=a.extend({},a.freefocus.moveOptions,c),null===a.freefocus.moves[c.move])throw new Error("Unknown move direction '"+c.move+"'");if(!(c.targets instanceof a))throw new Error("Argument targets should be a jQuery object");if(this.size()>1)throw new Error("Can't move from multiple elements");if(!this.size())return this;c.debug&&r(),d(this,c.move,c.cache);var h=b(this,c)||f(this,c);return h?(e(h,c.move,c.debug,c.cache),h.trigger(c.trigger),this):this},a.freefocus.moveOptions={trigger:"focus",weightFn:a.freefocus.weightFn,debug:!1,useNavProps:!0,maxDistance:1/0},a.freefocus.setupOptions={focusablesSelector:["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable]"].join(", "),focusedSelector:":focus",hoverFocus:!1,throttle:!1},a.freefocus.keys={37:"left",38:"up",39:"right",40:"down"},a.freefocus.moves={left:{},right:{},up:{},down:{}},a.freefocus.focusPoint={},a.freefocus.installedFocusablesSelector=null;var v=[],w=a(document)}(jQuery);