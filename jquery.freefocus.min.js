!function(a){"use strict";function b(b,d){var e=b.get(0).style["nav"+d.move.charAt(0).toUpperCase()+d.move.slice(1)]||c(b.attr("style")||"")["nav-"+d.move];if(e){if(0===e.indexOf("#"))return a(e);throw new Error("Invalid nav-"+d.move+" selector '"+e+"': only #id allowed.")}}function c(a){var b={};return a.split(";").forEach(function(a){var c=a.split(":");c[1]&&(b[c[0].trim()]=c[1].trim())}),b}function d(b,c){c.debug&&m(a.freefocus.focusPoint,"red","focus point for "+b.get(0).id);var d=h(g(b),c.move),f=i(e(b,c.move,c.debug),c.move),k=1/0,l=null;return c.targets.each(function(){var e=a(this);if(!e.is(b)){var i=h(g(e),c.move);if(!(i.fwd2<=d.fwd2)){var m=j(d,i,f);k>m&&(l=e,k=m)}}}),l}function e(b,c,d){var e=g(b),f=a.freefocus.focusPoint;if(b.is(f.$el))switch(c){case"left":f.x=e.x1;break;case"right":f.x=e.x2;break;case"up":f.y=e.y1;break;case"down":f.y=e.y2}else f=a.freefocus.focusPoint={element:b,x:Math.round(e.x1+(e.x2-e.x1)/2),y:Math.round(e.y1+(e.y2-e.y1)/2)},d&&m(f,"blue","picked focus point for "+b.get(0).id);return f}function f(b,c){var d=g(b),e=a.freefocus.focusPoint;switch(e.$el=b,c){case"left":e.x=d.x2;break;case"right":e.x=d.x1;break;case"up":e.y=d.y2;break;case"down":e.y=d.y1}}function g(a){var b=a.offset();return{x1:b.left,y1:b.top,x2:b.left+a.outerWidth(),y2:b.top+a.outerHeight()}}function h(a,b){switch(b){case"left":return{fwd1:-a.x2,fwd2:-a.x1,ort1:-a.y2,ort2:-a.y1};case"right":return{fwd1:a.x1,fwd2:a.x2,ort1:a.y1,ort2:a.y2};case"up":return{fwd1:-a.y2,fwd2:-a.y1,ort1:a.x1,ort2:a.x2};case"down":return{fwd1:a.y1,fwd2:a.y2,ort1:-a.x2,ort2:-a.x1}}}function i(a,b){switch(b){case"left":return{fwd:-a.x,ort:-a.y};case"right":return{fwd:a.x,ort:a.y};case"down":return{fwd:a.y,ort:-a.x};case"up":return{fwd:-a.y,ort:a.x}}}function j(a,b,c){var d,e=l(c,b),f=Math.abs(e.fwd-c.fwd),g=Math.abs(e.ort-c.ort);d=e.ort===c.ort?0:Math.sqrt(f*f+g*g);var h=k(a,b);return d+f+2*g-Math.sqrt(h)}function k(a,b){var c={ort1:a.ort1,ort2:a.ort2};b.ort1>c.ort1&&(c.ort1=b.ort1),b.ort2<c.ort2&&(c.ort2=b.ort2);var d=c.ort2-c.ort1;return 0>d&&(d=0),d}function l(a,b){var c={fwd:b.fwd1,ort:a.ort};return c.ort<b.ort1&&(c.ort=b.ort1),c.ort>b.ort2&&(c.ort=b.ort2),c}function m(b,c,d){a('<div title="'+d+'"></div>').appendTo(a("body")).css({position:"absolute",left:b.x-3,top:b.y-3,width:6,height:6,background:c,"border-radius":3})}function n(){q.on.apply(q,arguments),p.push(arguments)}function o(){p.forEach(function(a){q.off.apply(q,a)}),p=[]}a.freefocus=function(b,c){if("remove"===b)return o(),void 0;b=a.extend({},a.freefocus.setupOptions,b);var d=function(d){var e=a.extend({},c,{move:d,targets:a(b.focusablesSelector)});a(b.focusedSelector).freefocus(e)};b.throttle!==!1&&(d=_.throttle(d,b.throttle)),n("keydown",function(b){var c=a.freefocus.keys[b.which];c&&(b.preventDefault(),d(c))}),b.hoverFocus&&n("mouseenter",b.focusablesSelector,function(){var b=(c||{}).trigger||a.freefocus.moveOptions.trigger;return a(this).trigger(b)})},a.fn.freefocus=function(c){if(c=a.extend({},a.freefocus.moveOptions,c),null===a.freefocus.moves[c.move])throw new Error("Unknown move direction '"+c.move+"'");if(!(c.targets instanceof a))throw new Error("Argument targets should be a jQuery object");if(this.size()>1)throw new Error("Can't move from multiple elements");if(!this.size())return this;var e=b(this,c)||d(this,c);return e?(f(e,c.move),e.trigger(c.trigger),this):this},a.freefocus.moveOptions={trigger:"focus",weightFn:a.freefocus.weightFn,debug:!1,useNavProps:!0},a.freefocus.setupOptions={focusablesSelector:["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable]"].join(", "),focusedSelector:":focus",hoverFocus:!1,throttle:!1},a.freefocus.keys={37:"left",38:"up",39:"right",40:"down"},a.freefocus.moves={left:{},right:{},up:{},down:{}},a.freefocus.focusPoint={element:null,x:null,y:null};var p=[],q=a(document)}(jQuery);