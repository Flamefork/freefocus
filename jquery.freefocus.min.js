!function(a){"use strict";function b(b){var c=a(b),d=c.offset();return d.width=c.width(),d.height=c.height(),d.center={x:d.left+d.width/2,y:d.top+d.height/2},d}function c(b,c,d){var e=c.x-b.x,f=c.y-b.y,g=Math.sqrt(e*e+f*f),h=180*(Math.abs(a.freefocus.angles[d]-Math.atan2(f,e))/Math.PI);return h>180&&(h=Math.abs(h-360)),{distance:g,angle:h}}function d(a,d){var e=b(a),g=null,h=null;return d.targets.each(function(){if(this!==a){var i=b(this),j=c(e.center,i.center,d.move),k=d.weightFn({from:[a,e],to:[this,i],move:d.move,distance:j.distance,angle:j.angle});return d.debug&&f(this,j.distance,j.angle,k),k===!0?(g=this,!1):(k===!1||(!h||h>k)&&(h=k,g=this),void 0)}}),g}function e(a){var b={};return a.split(";").forEach(function(a){var c=a.split(":");c[1]&&(b[c[0].trim()]=c[1].trim())}),b}function f(b,c,d,e){var f=["position: absolute","left: 5px","top: 5px","font-size: 10px","font-family: monospace","color: #fff","text-shadow: 0 0 2px #000"].join(";"),g=["d = "+Math.round(c),"a = "+Math.round(d),Math.round(e)].join("<br/>"),h='<span class="weights" style="'+f+'">'+g+"</span>";a("span.weights",b).remove(),a(b).append(h)}function g(){j.on.apply(j,arguments),i.push(arguments)}function h(){i.forEach(function(a){j.off.apply(j,a)}),i=[]}a.freefocus=function(b,c){if("remove"===b)return h(),void 0;b=a.extend({},a.freefocus.setupOptions,b);var d=function(d){var e=a.extend({},c,{move:d,targets:a(b.focusablesSelector)});a(b.focusedSelector).freefocus(e)};b.throttle!==!1&&(d=_.throttle(d,b.throttle)),g("keydown",function(b){var c=a.freefocus.moveKeys[b.which];c&&(b.preventDefault(),d(c))}),b.hoverFocus&&g("mouseenter",b.focusablesSelector,function(){var b=(c||{}).trigger||a.freefocus.moveOptions.trigger;return a(this).trigger(b)})},a.fn.freefocus=function(b){if(b=a.extend({},a.freefocus.moveOptions,b),null===a.freefocus.angles[b.move])throw new Error("Unknown move direction '"+b.move+"'");if(!(b.targets instanceof a))throw new Error("Argument targets should be a jQuery object");if(this.size()>1)throw new Error("Can't move from multiple elements");if(!this.size())return this;var c=null;if(b.useNavProps){var f=this.get(0).style["nav"+b.move.charAt(0).toUpperCase()+b.move.slice(1)];f||(f=e(this.attr("style")||"")["nav-"+b.move]),f&&0===f.indexOf("#")&&(c=a(f).get(0))}return c||(c=d(this.get(0),b)),c?(a(c).trigger(b.trigger),this):this},a.freefocus.weightFn=function(a){return a.angle>89?!1:4*a.angle+a.distance},a.freefocus.moveOptions={trigger:"focus",weightFn:a.freefocus.weightFn,debug:!1,useNavProps:!0},a.freefocus.setupOptions={focusablesSelector:"[tabindex]",focusedSelector:":focus",hoverFocus:!1,throttle:!1},a.freefocus.moveKeys={37:"left",38:"up",39:"right",40:"down"},a.freefocus.angles={left:Math.atan2(0,-1),up:Math.atan2(-1,0),right:Math.atan2(0,1),down:Math.atan2(1,0)};var i=[],j=a(document)}(jQuery);